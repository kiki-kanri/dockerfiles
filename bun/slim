# Set build arguments
ARG BUN_TAG

# Set base image
FROM oven/bun:${BUN_TAG}

# Set or declare again arguments after FROM to make it accessible in later stages
ARG BUN_TAG

# Set labels
LABEL org.opencontainers.image.authors="kiki-kanri" \
    org.opencontainers.image.base.name="oven/bun:${BUN_TAG}" \
    org.opencontainers.image.licenses="MIT" \
    org.opencontainers.image.source="https://github.com/kiki-kanri/dockerfiles/tree/main/bun" \
    org.opencontainers.image.title="kikikanri/bun" \
    org.opencontainers.image.version="${BUN_TAG}"

# Install and upgrade packages
RUN apt-get update && \
    apt-get upgrade -y && \
    apt-get install -y --no-install-recommends git perl && \
    apt-get autoremove -y --purge && \
    apt-get clean && \
    rm -rf /var/cache/apt/* /var/lib/apt/lists/*
